/**
 * jQuery.Preload
 * http://github.com/htmlhero/jQuery.preload
 *
 * Created by Andrew Motoshin
 * http://htmlhero.ru
 *
 * Version: 1.4.1
 * Requires: jQuery 1.6+
 *
 */

(function(l){l.preload=function(c,f,g){var d=[],h=function(a){for(var b=0;b<d.length;b++)if(d[b].src===a.src)return d[b];d.push(a);return a};return function(a,b,e){if("undefined"!==typeof a){"string"===typeof a&&(a=[a]);2===arguments.length&&"function"===typeof b&&(e=b,b=0);var c=a.length,d;0<b&&b<c&&(d=a.slice(b,c),a=a.slice(0,b),c=a.length);if(c)for(var f=arguments.callee,g=0,n=function(){g++;g===c&&("function"===typeof e&&e.call(a,!d),f(d,b,e))},k,m=0;m<a.length;m++)if(k=new Image,k.src=a[m],k= h(k),k.complete)n();else l(k).on("load error",n);else"function"===typeof e&&e.call(a,!0)}}}();var p=function(c){var f=[],g=/url\(['"]?([^"')]*)['"]?\)/i,d,h,a,b,e;c=c.find("*").add(c);c.each(function(){d=l(this);h=d.css("background-image")+","+d.css("border-image-source");h=h.split(",");for(e=0;e<h.length;e++)a=h[e],-1===a.indexOf("about:blank")&&-1===a.indexOf("data:image")&&(b=g.exec(a))&&f.push(b[1]);"IMG"===this.nodeName&&f.push(this.src)});return f};l.fn.preload=function(c){var f=this,g=p(f); l.preload(g,function(){"function"===typeof c&&c.call(f.get())});return this}})(jQuery);