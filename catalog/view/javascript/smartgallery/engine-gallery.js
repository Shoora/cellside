var SG={data:{products:[],products_total:"",$container:"",default_mode:"no-full",last_active_mode:"",active_mode:"start",thumb_padding:4,$hoverThumb:"",intervalID_opt:"",firstLoad:!0,body_position:"",$thumbs:"",$camera_thumb:"",$button_mode:"",thumbActiveIndex:"",thumbNextLoadIndex:"",control_panel_h:38,block_loader:{},block_overlay:{}},init:function(){SG.data.block_loader={css:{border:"none",backgroundColor:"transparent",cursor:"wait","-webkit-box-shadow":"none","-moz-box-shadow":"none","box-shadow":"none"},
overlayCSS:{backgroundColor:SGS.behavior.overlay_set.background_color,opacity:SGS.behavior.overlay_set.opacity,cursor:"wait"},baseZ:1E8};SG.data.block_overlay={css:{width:"auto",top:SGS.behavior.overlay_set.top,bottom:SGS.behavior.overlay_set.bottom,left:SGS.behavior.overlay_set.left,right:SGS.behavior.overlay_set.right,"min-height":"250px",border:SGS.gallery.border_width+" solid "+SGS.gallery.border_color,"-webkit-border-radius":SGS.gallery.border_radius,"-moz-border-radius":SGS.gallery.border_radius,
"border-radius":SGS.gallery.border_radius,cursor:"auto",backgroundColor:"transparent"},overlayCSS:{backgroundColor:SGS.behavior.overlay_set.background_color,opacity:SGS.behavior.overlay_set.opacity,cursor:"auto"},baseZ:100};SG.data.body_position=$("body").css("position");SG.data.$container=$("#smart-gallery");if("SG_from_page"==SGS.behavior.load_content){var a=SG.searchPoducts_id();if(!a.length)return;var b={load_content:"SG_from_page"};b.products_id=a;"product"==SGS.data.name_page&&(b.only_images=
!0);SG.loadProducts(b,SG.fromPage,SG.data.$container)}else{if(""==SG.data.$container.html())return;SG.gallery.make(SG.data.$container);SG.mode.set(SGS.behavior.mode,SG.data.$container,400);SG.loadProducts();SG.handler.init();SG.gallery.setTooltip()}SG.QWP.init()},fromPage:function(a){var b=SG.galleryStructure.make(SG.data.products);a.append(b);SG.gallery.make(a);SG.mode.set(SGS.behavior.mode,a,400);SG.additionImages.init(a.parent());SG.infoInSliderMode.set(a,a.parent());SG.pagination.init(a.parent());
$(".camera_loader").delay(400).fadeOut(400);SG.handler.init();SG.gallery.setTooltip()},gallery:{make:function(a,b){a=a?a:SG.data.$container;var c=a.parent();if($.browser.opera||$.browser.msie)SGS.gallery.opacityOnGrid=!1;a.camera({alignment:"center",autoAdvance:SGS.gallery.autoAdvance,mobileAutoAdvance:SGS.gallery.mobileAutoAdvance,barDirection:"bottomToTop",barPosition:"bottom",cols:6,easing:SGS.gallery.easing,mobileEasing:SGS.gallery.mobileEasing,fx:SGS.behavior.ie_turbo&&$.browser.msie?"scrollLeft":
SGS.gallery.fx,mobileFx:SGS.behavior.ie_turbo&&$.browser.msie?"scrollLeft":SGS.gallery.mobileFx,gridDifference:250,height:"auto",imagePath:"catalog/view/theme/default/stylesheet/smartgallery/images/",hover:SGS.gallery.hover,loader:"pie",loaderColor:SGS.gallery.loaderColor,loaderBgColor:SGS.gallery.loaderBgColor,loaderOpacity:SGS.gallery.loaderOpacity,loaderPadding:SGS.gallery.loaderPadding,loaderStroke:SGS.gallery.loaderStroke,minHeight:SGS.gallery.minHeight,navigation:SGS.gallery.navigation,navigationHover:SGS.gallery.navigationHover,
mobileNavHover:SGS.gallery.mobileNavHover,opacityOnGrid:SGS.gallery.opacityOnGrid,overlayer:SGS.gallery.overlayer,pagination:!1,playPause:SGS.gallery.playPause,pauseOnClick:SGS.gallery.pauseOnClick,pieDiameter:38,piePosition:"leftTop",portrait:SGS.gallery.croped,rows:4,slicedCols:12,slicedRows:8,slideOn:SGS.gallery.slideOn,thumbnails:"slider"==SGS.behavior.mode?!0:SGS.gallery.thumbnails,time:SGS.gallery.time,transPeriod:SGS.gallery.transPeriod,onEndTransition:function(){SG.onEndTransition();eval(SGS.gallery.onEndTransition)},
onLoaded:function(){eval(SGS.gallery.onLoaded)},onStartLoading:function(){eval(SGS.gallery.onStartLoading)},onStartTransition:function(){SG.onStartTransition();eval(SGS.gallery.onStartTransition)}});SG.gallery.changeStructure(a);SG.gallery.setClass(a);b||SG.gallery.setTitle(a,c);SG.gallery.setHeight(a)},changeStructure:function(a){"top"==SGS.thumb.position?a.find(".camera_thumbs").parent().prependTo(a.parent()):a.find(".camera_thumbs").parent().appendTo(a.parent())},setClass:function(a){SGS.gallery.thumbnails||
a.hasClass("SG_qw_box")?"top"==SGS.thumb.position?(a.addClass("thumb_top"),a.parent().find(".camera_thumbs").addClass("thumb_top")):(a.addClass("thumb_bottom"),a.parent().find(".camera_thumbs").addClass("thumb_bottom")):(a.addClass("thumb_no"),a.parent().find(".camera_thumbs").addClass("thumb_no"))},setHeight:function(a){var b=a.width(),c="";-1!=SGS.gallery.height.indexOf("%")?(b=Math.round(b/(100/parseFloat(SGS.gallery.height))),c=""!==SGS.gallery.minHeight&&b<parseFloat(SGS.gallery.minHeight)?parseFloat(SGS.gallery.minHeight):
b,a.css({height:c})):""===SGS.gallery.height?a.css({height:"100%"}):a.css({height:SGS.gallery.height})},setTitle:function(a,b){SGS.behavior.title&&(""!=SGS.behavior.title_text&&(SGS.data.galery_title=SGS.behavior.title_text),"product"!=SGS.data.name_page&&(b.find(".galery-title").remove(),a.addClass("title-true"),b.prepend('<div class="galery-title" >'+SGS.data.galery_title+"</div>")))},setTooltip:function(){SGS.product.button.tooltip&&($(".SG_button_box a").tipsy({trigger:"hover",gravity:"n",opacity:SGS.tooltip.opacity,
live:!0}),$(".SG_qw_button").tipsy({trigger:"hover",gravity:"e",opacity:SGS.tooltip.opacity,live:!0}))}},loadProducts:function(a,b,c,d){a||(a={},a.load_content=SGS.behavior.load_content,a.load_from_id_path=SGS.load_from_id_path);$.ajax({url:"index.php?route=module/smartgallery/getproduct&token="+SGS.token+"&gallery_id="+SGS.gallery_id,dataType:"json",type:"POST",data:a,success:function(a){d||(a.products.length&&$.merge(SG.data.products,a.products),a.products_total&&(SG.data.products_total=a.products_total));
a.products.length&&$("body").trigger("load_product_complete");b&&b(c,a)}})},handler:{init:function(a){a=a?a:SG.data.$container;"SG_from_page"!=SGS.behavior.load_content&&$("body").live("load_product_complete",function(){SG.data.firstLoad&&(SG.additionImages.init(a.parent()),SG.infoInSliderMode.set(a,a.parent()),SG.pagination.init(a.parent()),$(".camera_loader").delay(400).fadeOut(400));SG.data.firstLoad=!1});SGS.behavior.allow_change_view&&$(".full_screen_button").live("click",function(){SG.handler.fullScreenButtonClick($(this))});
("slider"==SGS.behavior.mode||"button"==SGS.behavior.mode||"hidden"==SGS.behavior.mode||SGS.behavior.quick_view_product)&&$(".close_gallery").live("click",function(){SG.handler.closeGallery($(this))});$(".blockOverlay").live("click",function(){"overlay"!=SG.data.active_mode||$(this).parents(".blockMsg").length||SG.handler.closeGallery($(this))});"slider"==SGS.behavior.mode&&$(".slider-screen .pix_thumb>img").live("click",function(){SG.mode.set(SGS.behavior.activate_mode,SG.getGallery($(this)),!0)});
$(document).ajaxStart(function(){});$(document).ajaxStop(function(){$(".prod_button").removeClass("button_loader")});a.find(".SG_button_box")&&$(".prod_button").live("click",function(){$(".prod_button").hasClass("button_loader")||$(this).addClass("button_loader")})},fullScreenButtonClick:function(a){if(a.hasClass("full")){var b=SG.data.default_mode;if("no-full"==SG.data.last_active_mode||"overlay"==SG.data.last_active_mode)b=SG.data.last_active_mode;SG.mode.set(b,SG.getGallery(a),!0)}else SG.mode.set("full",
SG.getGallery(a),300)},closeGallery:function(a){if(a=SG.getGallery(a))"true"!=a.parent().attr("data-QW-mode")?SG.mode.set(SGS.behavior.mode,a,400):($(".blockUI").remove(),$(".overlay-screen-place").remove(),SG.data.body_position&&$("body").css("position",SG.data.body_position))}},mode:{set:function(a,b,c,d){setTimeout(function(){$("body").trigger("mode_set")},1E3);b=b?b:SG.data.$container;var e=b.parent();if(a==SG.data.active_mode&&"overlay"==a)SG.mode.setElementPos(b,e);else{c=c?c:!1;SG.mode.nullStyle(b,
e);SG.mode.setAnimate(e,c);d||("start"!=SG.data.active_mode&&a!=SG.data.active_mode&&(SG.data.last_active_mode=SG.data.active_mode),SG.data.active_mode=a);switch(a){case "button":SG.mode.button(b,e,!1);break;case "slider":SG.mode.slider(b,e,c);break;case "hidden":SG.mode.hidden(b,e,c);break;case "overlay":SG.mode.overlay(b,e,c);break;case "no-full":SG.mode.noFull(b,e,c);break;case "full":SG.mode.full(b,e,c)}$("body").trigger("galery_resize");$(".camera_loader").delay(700).fadeOut(400)}},full:function(a,
b,c){b.addClass("full-screen");b.find(".full_screen_button").removeClass("no-full").addClass("full");SG.mode.setElementPos(a,b);$("body").css("position","fixed")},noFull:function(a,b,c){b.addClass("no-full-screen");SG.gallery.setHeight(a)},overlay:function(a,b,c){b.addClass("overlay-screen");b.parent().hasClass("overlay-screen-place")||b.wrap('<div class="overlay-screen-place" ></div>');$.blockUI($.extend({message:b},SG.data.block_overlay));SG.mode.setElementPos(a,b);$("body").css("position","fixed")},
slider:function(a,b,c){b.addClass("slider-screen");SG.infoInSliderMode.set(a,a.parent())},button:function(a,b,c){b.addClass("button-screen");$(".gallery-show-button").live("click",function(){var a=SG.getGallery($(this));SG.mode.set(SGS.behavior.activate_mode,a,!0);SG.setThumbWidth(a.parent());$(this).remove()});a=$(SGS.data.mode_button_html);a.attr("style",SGS.data.mode_button_style);a.addClass(SGS.data.mode_button_class);b.before(a)},hidden:function(a,b,c){b.find(".SG_button_box").remove();b.addClass("hidden-screen");
$(SGS.data.selector_show_gallery).click(function(){b.removeClass("hidden-screen");SG.setThumbWidth(b);$("body").trigger("galery_resize");SG.mode.set(SGS.behavior.activate_mode,a,!0);b.find(".camera_loader").delay(100).fadeOut(400);return!1})},setAnimate:function(a,b){b&&(b=$.isNumeric(b)?b:200,a.animate({opacity:0},0),setTimeout(function(){a.animate({opacity:1},200)},b))},nullStyle:function(a,b){$("body").css("position",SG.data.body_position);a.css({top:0,bottom:0});b.hasClass("info-slider-mode")&&
(SG.infoInSliderMode.hide(a,b),SG.setThumbWidth(b,!0));b.find(".full_screen_button").removeClass("full").addClass("no-full");b.hasClass("overlay-screen")&&$(".overlay-screen-place").length&&($.unblockUI(),setTimeout(function(){b.parent().hasClass("overlay-screen-place")&&b.unwrap()},1E3));b.removeAttr("class")},setElementPos:function(a,b){var c=0,d=0,e=0;SGS.behavior.title&&!a.hasClass("SG_qw_box")&&(d+=parseInt(b.find(".galery-title").height()));if(SGS.gallery.thumbnails||a.hasClass("SG_qw_box"))c=
parseInt(b.find(".camera_thumbs").height());"top"==SGS.thumb.position&&(d+=c);"bottom"==SGS.thumb.position&&(e+=c);a.css("top",+d);a.css("bottom",e)}},additionImages:{init:function(a){if(!(SGS.behavior.ie_turbo&&$.browser.msie||!SGS.gallery.thumbnails&&!SGS.product.images||"product"==SGS.data.name_page||$("div.SG_qw_box").length)){a.find(".camera_wrap").addClass("add_images-true");var b;b="default"==SGS.product.images_position?"top"==SGS.thumb.position?"n":"s":"top"==SGS.product.images_position?"s":
"n";$(".camera_thumbs_cont>div>ul>li>img").tipsy({trigger:"man",offset:-8,gravity:b,opacity:SGS.tooltip.opacity,live:!0,html:!0,title:function(){return SG.additionImages.addProductsImages($(this).parent())}});$("div[data-wrap=gallery-box]").live("mouseover",function(b){"slider"!=SG.data.active_mode&&a.find(".camera_wrap").hasClass("add_images-true")&&$(".jcarousel").parents(".tipsy").remove()});$(".camera_thumbs li img").live("click",function(){if(a.find(".camera_wrap").hasClass("add_images-true")){var b=
$(".cameraSlide.cameracurrent img");b.parent().hasClass("cameracurrent")&&b.attr("data-main-img")&&b.attr("data-main-img")!=b.attr("src")&&(b.attr("src",b.attr("data-main-img")),SGS.behavior.zoom&&(SG.zoom.remove(),SG.zoom.make()))}});$(".camera_thumbs li img").hover(function(){if("slider"!=SG.data.active_mode&&a.find(".camera_wrap").hasClass("add_images-true")){var b=$(this);SG.data.intervalID_opt=setTimeout(function(){var a=SG.getProdFromThumb(b.parent());if(!a.images)return!1;var e=[];$.each(a.images,
function(){e.push(this.thumb)});$(".jcarousel").parents(".tipsy").remove();SG.preloadImg(e,SG.additionImages.showThumbImages,b)},200)}},function(){"slider"!=SG.data.active_mode&&a.find(".camera_wrap").hasClass("add_images-true")&&clearInterval(SG.data.intervalID_opt)})}},addProductsImages:function(a){var b=a.parent().find("li").index(a),c='<div style="',c=c+("width:"+SGS.thumb.width+"px;"),c=c+'" class="jcarousel"><ul>',b=SG.data.products[b];if(!b.images)return!1;SG.data.$hoverThumb=a;$.each(b.images,
function(){c+='<li style="height:'+(SGS.thumb.height+4)+'px;" ><a data-image="'+this.image+'" href="#"><img src="'+this.thumb+'" class="" /></a></li>'});return c+="</ul></div>"},showThumbImages:function(a){a.trigger("t_show");$(".jcarousel a").click(function(b){b.preventDefault();if(SG.data.$hoverThumb.get(0)!=$(".camera_wrap.add_images-true").parent().find(".pix_thumb.cameracurrent").get(0))return SG.data.$hoverThumb.find("img").click(),!1;$(".camera_loader").fadeIn(400);SG.preloadImg([$(this).attr("data-image")],
SG.additionImages.showAdditionalImage,{img_src:$(this).attr("data-image"),$self:a})})},showAdditionalImage:function(a){if(!$("div.SG_qw_box").length){var b=$(".camera_wrap.add_images-true").parent().find(".cameraSlide.cameracurrent img");b.attr("data-main-img")||b.attr("data-main-img",b.attr("src"));$clone=b.clone();$clone.attr("src",a.img_src);$(".camera_wrap.add_images-true").parent().find(".cameraSlide.cameracurrent").prepend($clone);b.remove();$(".camera_wrap.add_images-true").parent().find(".camera_loader").delay(100).fadeOut(400);
SGS.behavior.zoom&&(a=SG.getGallery(a.$self),SG.zoom.remove(a.parent()),SG.zoom.make(a.parent()))}}},infoInSliderMode:{hide:function(a,b){if(SGS.behavior.slider_mode.name||SGS.behavior.slider_mode.price||SGS.behavior.slider_mode.add_to_cart)b.removeClass("info-slider-mode"),$(".SG_info_slider").css("display","none")},set:function(a,b){function c(a){var b='<div class="SG_info_slider"> ';SGS.behavior.slider_mode.name&&(b+='<div class="info_slider_name">'+a.name+"</div>");b+="<div>";if(SGS.behavior.slider_mode.price){var c=
"";if(a.special)var f='<span style="cursor:auto;display: inline-block; margin: 5px -8px;"><i style=" position:relative; font-size:80%; right:-20px; bottom:-7px; text-decoration: line-through;">'+a.price+"</i>",f=f+('<i style="font-weight:bold; position:relative; left:-20px; top:-7px; color: '+SGS.product.color_special_price+';">'+a.special+"</i></span>");else f='<span style="cursor:auto;font-weight:bold;">'+a.price+"</span>",c='style="display: inline-block;margin: 2px;"';b+="<a "+c+' class="prod_button">'+
f+"</a>"}SGS.behavior.slider_mode.add_to_cart&&(b+="<a original-title=\"Add to Cart\" class=\"prod_button sg_butt_to_cart\" onclick=\"if(!$('.prod_button').hasClass('button_loader'))addToCart('"+a.product_id+"');return false;\" ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a>");return b+="</div></div>"}"slider"==SG.data.active_mode&&"product"!=SGS.data.name_page&&(b.find(".SG_info_slider").length?($(".SG_info_slider").css("display","block"),b.addClass("info-slider-mode"),
SG.setThumbWidth(a.parent(),!0)):SG.data.products.length&&(SGS.behavior.slider_mode.name||SGS.behavior.slider_mode.price||SGS.behavior.slider_mode.add_to_cart)&&(b.addClass("info-slider-mode"),b.find(".pix_thumb").each(function(){$(this).css("display","inline-block");$(this).append(c(SG.getProdFromThumb($(this))))}),SG.setThumbWidth(a.parent(),!0)))}},pagination:{init:function(a){"SG_best_seller"!=SGS.behavior.load_content&&"SG_popular_product"!=SGS.behavior.load_content&&"SG_latest_product"!=SGS.behavior.load_content&&
SGS.behavior.pagination&&("SG_from_page"==SGS.behavior.load_content?SG.pagination.pageLoad.init(a):SG.pagination.packLoad.init(a))},makePagBlock:function(a){a.find(".camera_thumbs_cont").append('<div class="sg-pagination-block" ></div>');a.addClass("pagination-true")},addAjaxPagBlock:function(a,b,c){var d=a.find(".sg-pagination-block");if(!c||c&&"prev"==c){var e=$('<div class="page_prev"><i></i><span>'+SGS.data.pagination_text.prev+"</span></div>");d.append(e);e.click(function(c){c.stopPropagation();
b(a,"prev")})}if(!c||c&&"next"==c)c=$('<div class="page_next"><span>'+SGS.data.pagination_text.next+"</span><i></i></div>"),d.append(c),c.click(function(c){c.stopPropagation();b(a,"next")})},pageLoad:{data:{href:"",looked_pages:[],now_looked_page:"",active_page:"",$container:"",page_next:!0,page_prev:!0},setData:function(){SG.pagination.pageLoad.data.href=$(SGS.data.selector_pagin_container).find(SGS.data.selector_pagin_element).attr(SGS.data.attr_pagin_href);if("undefined"===typeof SG.pagination.pageLoad.data.href)return!1;
var a=$(SGS.data.selector_pagin_container).find(SGS.data.selector_pagin_activ).text(),a=a.match(/\d+/);SG.pagination.pageLoad.data.active_page=parseInt(a[0]);SG.pagination.pageLoad.data.looked_pages.push(SG.pagination.pageLoad.data.active_page);SG.pagination.pageLoad.data.$container=$(SGS.data.selector_pagin_container);return!0},init:function(a){if(SG.pagination.pageLoad.data.href||SG.pagination.pageLoad.setData())SG.pagination.makePagBlock(a),SGS.behavior.ajax_pagination_mode?SG.pagination.addAjaxPagBlock(a,
SG.pagination.pageLoad.getProducts):(a=a.find(".sg-pagination-block"),a.append(SG.pagination.pageLoad.data.$container.clone(!0)),a.find(".results").remove())},getProducts:function(a,b,c){"full"==SG.data.active_mode?a.append('<div class="layer_loader"></div>'):a.wrap('<div class="layer_loader"></div>');$(".layer_loader").block($.extend({message:'<div class="block_loader"><div>'},SG.data.block_loader));SG.data.thumbActiveIndex=a.find(".cameracurrent").index();SG.data.thumbNextLoadIndex=a.find(".pix_thumb").last().index()+
1;SG.pagination.pageLoad.data.page_prev||$(".page_prev").css({opacity:0.5,cursor:"auto"});SG.pagination.pageLoad.data.page_next||$(".page_next").css({opacity:0.5,cursor:"auto"});var d=0;if("prev"==b&&(d=-1,!SG.pagination.pageLoad.data.page_prev)){$(".camera_loader").delay(400).fadeOut(400);return}if("next"==b&&(d=1,!SG.pagination.pageLoad.data.page_next)){$(".camera_loader").delay(400).fadeOut(400);return}if(c)c=$(c).contents().find("body"),c=SG.pagination.pageLoad.searchPoducts_id(c),$("#temp_page").remove(),
c.length?(SG.pagination.pageLoad.data.looked_pages.push(SG.pagination.pageLoad.data.now_looked_page),SG.pagination.pageLoad.data.active_page=SG.pagination.pageLoad.data.now_looked_page,b={load_content:"SG_from_page"},b.products_id=c,SG.loadProducts(b,SG.refreshGallery,a)):("prev"==b&&(SG.pagination.pageLoad.data.page_prev=!1,$(".page_prev").css({opacity:0.5})),"next"==b&&(SG.pagination.pageLoad.data.page_next=!1,$(".page_next").css({opacity:0.5})),$(".camera_loader").delay(400).fadeOut(400));else{c=
SG.pagination.pageLoad.data.active_page+d;var d=Math.min.apply(Math,SG.pagination.pageLoad.data.looked_pages),e=Math.max.apply(Math,SG.pagination.pageLoad.data.looked_pages);"prev"==b&&c>=d&&(c=d-1);"next"==b&&c<=e&&(c=e+1);0===c?(SG.pagination.pageLoad.data.page_prev=!1,$(".page_prev").css({opacity:0.5,cursor:"auto"}),$(".camera_loader").delay(400).fadeOut(400)):SG.func.in_array(c,SG.pagination.pageLoad.data.looked_pages)?$(".camera_loader").delay(400).fadeOut(400):(SG.pagination.pageLoad.data.now_looked_page=
c,c=SG.pagination.pageLoad.getHref(c),SG.pagination.pageLoad.getIframe(c,SG.pagination.pageLoad.getProducts,b,a))}},getHref:function(a){var b=SG.func.url_get_args(SG.pagination.pageLoad.data.href);b.page=a;return SG.func.make_new_url(SG.pagination.pageLoad.data.href.split("?")[0],b)},getIframe:function(a,b,c,d){var e=$('<div id="temp_page"></div>'),g=$('<iframe id="temp_iframe" style="display: none;"></iframe>');e.html(g);g.attr("src",a);$("body").append(e);g.load(function(){b(d,c,this)})},searchPoducts_id:function(a){a||
(a=$("body"));var b=[];a.find(SGS.data.selector_page).each(function(){var a=$(this).attr(SGS.data.attr_page).match(/\d+/);b.push(a[0])});return b}},packLoad:{data:{pack:1,pack_next:!0},init:function(a){SGS.behavior.items_per_pack>SG.data.products_total||!SG.pagination.packLoad.data.pack_next||(SG.pagination.makePagBlock(a),SG.pagination.addAjaxPagBlock(a,SG.pagination.packLoad.getProducts,"next"))},getProducts:function(a,b){if(SG.data.products_total<SGS.behavior.items_per_pack*SG.pagination.packLoad.data.pack)SG.pagination.packLoad.data.pack_next=
!1,SG.pagination.remove(a);else{SG.pagination.packLoad.data.pack++;"full"==SG.data.active_mode?a.append('<div class="layer_loader"></div>'):a.wrap('<div class="layer_loader"></div>');$(".layer_loader").block($.extend({message:'<div class="block_loader"><div>'},SG.data.block_loader));SG.data.thumbActiveIndex=a.find(".cameracurrent").index();SG.data.thumbNextLoadIndex=a.find(".pix_thumb").last().index()+1;var c={};c.load_content=SGS.behavior.load_content;c.load_from_id_path=SGS.load_from_id_path;SG.pagination.packLoad.data.pack&&
(c.pack=SG.pagination.packLoad.data.pack);SG.loadProducts(c,SG.refreshGallery,a)}}},hide:function(a){a.find(".sg-pagination-block").hide()},show:function(a){a.find(".sg-pagination-block").show()},remove:function(a){a.find(".sg-pagination-block").remove()}},galleryStructure:{make:function(a,b){var c="",d=!1;b=b?b:!1;$.each(a,function(){if(this.thumb){var a="",a=a+SG.galleryStructure.getInfoButtonBlock(this,b);SGS.product.description||b?(a+='<span style="clear:both;">'+this.description+"</span>",a+=
'<div class="camera_caption fadeFromBottom" >'+a+"</div>"):a+='<div class="without_description camera_caption fadeFromBottom" >'+a+"</div>";"product"==SGS.data.name_page||b?(this.thumb&&!d&&(c+='<div data-thumb="'+this.thumb+'" data-src="'+this.image+'" > '+a+" </div>",d=!0),this.images&&$.each(this.images,function(){c+='<div data-thumb="'+this.thumb+'" data-src="'+this.image+'" > '+a+" </div>"})):c+='<div data-id="'+this.product_id+'" data-thumb="'+this.thumb+'" data-src="'+this.image+'" >'+a+"</div>"}});
return c},getInfoButtonBlock:function(a,b){var c="";b=b?b:!1;if(SGS.product.button.add_to_cart||SGS.product.button.add_to_wish_list||SGS.product.button.add_to_compare||SGS.product.button.see_full_details||SGS.product.price||SGS.product.name||b){SG_style="";SGS.product.name&&SGS.product.description&&(SG_style='style="margin-top: -53px;"');SGS.product.name&&b&&(SG_style='style="margin-top: -53px;"');c+="<span "+SG_style+' class="SG_button_box">';if(SGS.product.name||b)c+='<span class="prod_button sg_name">'+
a.name+"</span><br>";if(SGS.product.button.add_to_cart||b)c+="<a original-title=\"Add to Cart\" class=\"prod_button sg_butt_to_cart\"  onclick=\"if(!$('.prod_button').hasClass('button_loader'))addToCart('"+a.product_id+"');return false;\" ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a>";if(SGS.product.button.add_to_wish_list||b)c+="<a original-title=\"Add to Wish List\" class=\"prod_button sg_butt_to_wish\" onclick=\"if(!$('.prod_button').hasClass('button_loader'))addToWishList('"+
a.product_id+"');\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a>";if(SGS.product.button.add_to_compare||b)c+="<a original-title=\"Add to Compare\" class=\"prod_button sg_butt_to_compare\" onclick=\"if(!$('.prod_button').hasClass('button_loader'))addToCompare('"+a.product_id+"');\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a>";if(SGS.product.button.see_full_details||b)c+='<a class="prod_button" href="'+a.href+'" ><span>View Item</span></a>';
if(SGS.product.price||b){var d="";a.special?(d='<span style="cursor:auto; margin: 0 -10px;"><span style=" position:relative; font-size:80%; right:-20px; bottom:-7px; text-decoration: line-through;">'+a.price+"</span>",d+='<span style="font-weight:bold; position:relative; left:-20px; top:-7px; color: '+SGS.product.color_special_price+';">'+a.special+"</span></span>"):d='<span style="cursor:auto;font-weight:bold;">'+a.price+"</span>";c+='<a class="prod_button">'+d+"</a>"}c+="</span>"}return c}},refreshGallery:function(a,
b){if(!b||b.products.length){var c=a.find(".camera_wrap"),d=SG.galleryStructure.make(SG.data.products),e=a.find(".sg-pagination-block").clone(!0,!0);$(">div",a).not(c).remove();c.empty().removeData().removeAttr("class").removeAttr("style");c.append(d);SGS.gallery.mobileAutoAdvance=!1;SGS.gallery.autoAdvance=!1;SG.gallery.make(c);SG.additionImages.init(a);e.length&&(a.find(".camera_thumbs_cont").append(e),a.addClass("pagination-true"));SG.mode.set(SG.data.active_mode,c,!1)}$(".layer_loader").unblock();
a.parent().hasClass("layer_loader")&&a.unwrap()},QWP:{init:function(){if(SGS.behavior.quick_view_product){var a=$('<span original-title="Quick view" class="SG_qw_button"><span class="icon-loupe"></span></span>');"append"===SGS.data.position_qw_button?$(SGS.data.selector_qw_button).append(a):"prepend"===SGS.data.position_qw_button&&$(SGS.data.selector_qw_button).prepend(a);$(".SG_qw_button").live("click",function(){eval("var href = $(this)"+SGS.data.jq_relative_path_to_id);""!==href&&(product_id="",
product_id=-1==href.indexOf("product_id")?Number(href.replace(/\D+/g,"")):SG.func.url_get_args(href).product_id,""!==product_id&&SG.QWP.load(product_id))})}},load:function(a){var b={load_content:"SG_product_id"};b.products_id=[a];$.blockUI($.extend({message:'<div class="block_loader"><div>'},SG.data.block_loader));SG.loadProducts(b,SG.QWP.open,"",!0)},open:function(a,b){var c=SG.galleryStructure.make(b.products,!0),c=$('<div data-wrap="gallery-box" data-QW-mode="true" ><div class="SG_qw_box">'+c+
"</div></div>");$("body").append(c);SG.gallery.make(c.find(".SG_qw_box"),!0);c.find(".full_screen_button").remove();$.unblockUI();SG.mode.set("overlay",c.find(".SG_qw_box"),400,!0)}},getGallery:function(a){$gallery=a.parents("div[data-wrap=gallery-box]").find(".camera_wrap");$gallery.length||($gallery=a.next().find(".camera_wrap"));return $gallery.length?$gallery:!1},setThumbWidth:function(a,b){var c=a.find(".pix_thumb"),d=0;c.each(function(){d+=$(this).width()+2*SG.data.thumb_padding});c.parent().width(d+
40);b&&setTimeout(function(){$("body").trigger("thumb_resize")},500);return d},getProdFromThumb:function(a){a=a.parent().find("li").index(a);return SG.data.products[a]},preloadImg:function(a,b,c){var d=$('<div class="preload_image" style=""></div>');$("body").append(d);$.each(a,function(){$('<img height="200" src="'+this+'" alt="" />').appendTo(d)});d.preload(function(){if(b)try{b(c)}catch(a){}d.remove()})},searchPoducts_id:function(a){a||(a=$("body"));var b=[];a.find(SGS.data.selector_page).each(function(){var a=
$(this).attr(SGS.data.attr_page).match(/\d+/);b.push(a[0])});return b},zoom:{init:function(a){SGS.behavior.zoom&&$(".camera_thumbs li img").live("click",function(){var a=SG.getGallery($(this));SG.zoom.remove(a.parent());SG.zoom.make(a.parent())})},make:function(a){if(SGS.behavior.zoom){var b=$(".SG_qw_box");if(!$(".cloudzoom").length||b.length){a||(a=b.length?b.parent():$("body"));a.find(".sg-zoom-button").length||SG.zoom.makeZoomButton(a);var c=a.find(".cameraSlide.cameracurrent>img");if(c.length){b=
SG.zoom.getCloudSrc(c);if("image"==SGS.behavior.zoom_to){a.find(".zoom_cont")&&SG.zoom.remove(a);var d=a.find(".camera_target"),e=$('<div style="height:100%;margin:0 auto;" class="zoom_cont"></div>');e.attr("src",c.attr("src")).width(SG.zoom.getWidth(d,c)).css("margin-top","-"+d.height()+"px");$(window).resize(function(){e.width(SG.zoom.getWidth(d,c)).css("margin-top","-"+d.height()+"px")});$("body").live("mode_set",function(){e.width(SG.zoom.getWidth(d,c)).css("margin-top","-"+d.height()+"px")});
d.append(e)}else e=$(".camera_target .cameraCont"),e.hasClass("cloudzoom")&&SG.zoom.remove(),e.attr("src",c.attr("src"));e.CloudZoom({zoomImage:b,zoomPosition:"inside",zoomOffsetX:0,mouseTriggerEvent:"click",tintOpacity:0,easing:6})}}}},makeZoomButton:function(a){var b="image"==SGS.behavior.zoom_to?".zoom_cont":".camera_target .cameraCont",c=a.find(".camera_target_content"),d=$('<div class="sg-zoom-button"><span class="icon-loupe"></span></div>');c.prepend(d);d.click(function(){$(this).slideUp(200).delay(800).fadeIn(400);
$(this).parents(".camera_fakehover").find(b).mousemove().click();SG.zoom.changeWidth(a)});d.mouseover(function(){$(this).slideUp(200).delay(800).fadeIn(400);$(this).parents(".camera_fakehover").find(b).mousemove().click();SG.zoom.changeWidth(a)})},getCloudSrc:function(a){a=a.attr("src");var b=a.lastIndexOf("-")+1,c=a.lastIndexOf(".");return a.substring(0,b)+SGS.zoom_image.width+"x"+SGS.zoom_image.height+a.substr(c)},remove:function(a){if(SGS.behavior.zoom){var b=$(".SG_qw_box");a||(a=b.length?b.parent():
$("body"));"image"==SGS.behavior.zoom_to?a.find(".zoom_cont").remove():a.find(".cloudzoom").each(function(){var a=$(this).data("CloudZoom");"undefined"!==typeof a&&(a.destroy(),$(this).removeAttr("src"))})}},getWidth:function(a,b){var c=a.height()/b.height();return 1<=c?b.width():b.width()*c},changeWidth:function(a){setTimeout(function(){if("image"==SGS.behavior.zoom_to){var b=a.find(".camera_target"),c=$(".cloudzoom-zoom-inside"),b=b.width(),d=c.width(),d=b-d;0>=d||80>=d||(c=parseInt(c.css("left"))-
d/2,$(".cloudzoom-zoom-inside, .cloudzoom-blank").animate({width:b+"px",left:c+"px"},400))}},1100)}},onStartTransition:function(){SG.zoom.remove();var a=$(".camera_wrap.add_images-true .cameraSlide.cameracurrent img");a.attr("data-main-img")&&a.attr("src",a.attr("data-main-img"))},onEndTransition:function(){SG.zoom.make()},func:{url_get_args:function(a){var b,c,d;d={};b=document.createElement("a");b.href=a;a=b.search.substring(1).split("&");for(b=0;b<a.length;b++)a[b].replace(/\+/g," "),c=a[b].split("=",
2),d[decodeURIComponent(c[0])]=decodeURIComponent(c[1]);return d},make_new_url:function(a,b){var c=a,d="";$.each(b,function(a,b){""!==d&&(d+="&");d+=a+"="+b});return c+("?"+d)},in_array:function(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1}}};